<div class="container">

  <div class="d-flex">
    <%= image_tag @crypto.image_url, class: "crypto-logo-show me-3" %>
    <div class="d-flex align-items-center crypto-show">
      <h1 class="me-3"><%=  @crypto.name%></h1>
      <h2 class="me-3"><%= @crypto.ticker.upcase %></h2>
      <% @rating.round(0).times do %>
      <%= image_tag("d_full", class: "rating-diamond") %>
      <% end %>
      <% (5-@rating.round(0)).times do %>
      <%= image_tag("d_empty",  class: "rating-diamond") %>
      <% end %>
      <h3> (<%= @rating.round(1) %>)</h3>
    </div>
  </div>

  <div class="d-flex me-5 mb-5 col-11 crypto-details">
    <%= image_tag "rank" %>
    <h4>#<%= @crypto.rank %></h4>
    <%= image_tag "dollar" %>
    <h4 class="me-2"><%= @crypto.price.round(0) %></h4>
    <%= image_tag "votes" %>
    <h4><%= @crypto.crypto_ratings.count %></h4>
    <%= image_tag "comments" %>
    <h4> <%= time_ago_in_words(@crypto.crypto_comments.last.created_at.to_datetime,  scope: 'datetime.distance_in_words.abbrv', include_seconds: true) %></h4>
  </div>


  <% @crypto.crypto_comments.order("created_at ASC").each do |c| %>
    <div class="row justify-content-md-center mb-4">
      <div class="d-flex comment col-12 p-3 rounded-4">
        <%= image_tag c.user.photo, class: "comment-avatar me-3" %>
        <h4 class="me-5"><%= c.user.username %></h4>
        <div class="me-auto">
          <h5><%= time_ago_in_words(c.created_at.to_datetime,  scope: 'datetime.distance_in_words.abbrv', include_seconds: true) %></h5>
          <p class="m-0"><%= c.content %></p>
        </div>
        <%= image_tag "comment", width: "41", height: "42", class: "p-1 shadow rounded-4 align-self-end"%>
        </p>
      </div>
    </div>
  <% end %>


  <%= simple_form_for [@crypto, @comment], html: { class: "p-3 rounded-4 bg-white"} do |c| %>
    <%= c.input :content, as: :rich_text_area, placeholder: 'your comment....', label: 'Comment' %>
    <%= c.submit 'Create' %>
  <% end %>
</div>
